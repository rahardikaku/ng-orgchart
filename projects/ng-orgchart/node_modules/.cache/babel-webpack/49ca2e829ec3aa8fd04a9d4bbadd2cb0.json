{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\n\nfunction ChartNodeComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"oc-icon-plus\": a0,\n    \"oc-icon-minus\": a1\n  };\n};\n\nfunction ChartNodeComponent_i_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"i\", 5);\n    i0.ɵɵlistener(\"click\", function ChartNodeComponent_i_2_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.toggleChildren();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r1.isCollapsed, !ctx_r1.isCollapsed));\n  }\n}\n\nfunction ChartNodeComponent_div_3_ng_container_1_div_1_ng_container_1_orgchart_node_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"orgchart-node\", 11);\n    i0.ɵɵlistener(\"nodeClick\", function ChartNodeComponent_div_3_ng_container_1_div_1_ng_container_1_orgchart_node_1_Template_orgchart_node_nodeClick_0_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(5);\n      return ctx_r15.onNodeClick($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const j_r13 = i0.ɵɵnextContext().index;\n    const i_r9 = i0.ɵɵnextContext(2).index;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"datasource\", ctx_r14.datasource.children[i_r9 + j_r13])(\"nodeHeading\", ctx_r14.nodeHeading)(\"nodeContent\", ctx_r14.nodeContent)(\"nodeTemplate\", ctx_r14.nodeTemplate)(\"groupScale\", ctx_r14.groupScale)(\"select\", ctx_r14.select);\n  }\n}\n\nfunction ChartNodeComponent_div_3_ng_container_1_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ChartNodeComponent_div_3_ng_container_1_div_1_ng_container_1_orgchart_node_1_Template, 1, 6, \"orgchart-node\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const j_r13 = ctx.index;\n    const i_r9 = i0.ɵɵnextContext(2).index;\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r9 + j_r13 < ctx_r11.datasource.children.length);\n  }\n}\n\nfunction ChartNodeComponent_div_3_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, ChartNodeComponent_div_3_ng_container_1_div_1_ng_container_1_Template, 2, 1, \"ng-container\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.Arr(ctx_r10.groupScale));\n  }\n}\n\nfunction ChartNodeComponent_div_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ChartNodeComponent_div_3_ng_container_1_div_1_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const i_r9 = ctx.index;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r9 % ctx_r7.groupScale === 0);\n  }\n}\n\nfunction ChartNodeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵlistener(\"@expandCollapse.start\", function ChartNodeComponent_div_3_Template_div_animation_expandCollapse_start_0_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.toggleAnimStart($event);\n    })(\"@expandCollapse.done\", function ChartNodeComponent_div_3_Template_div_animation_expandCollapse_done_0_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.toggleAnimEnd($event);\n    });\n    i0.ɵɵtemplate(1, ChartNodeComponent_div_3_ng_container_1_Template, 2, 1, \"ng-container\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@expandCollapse\", ctx_r2.isCollapsed ? \"collapsed\" : \"expanded\")(\"ngStyle\", ctx_r2.ecStyles);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.datasource.children);\n  }\n}\n\nfunction ChartNodeComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 13);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const nodeData_r23 = ctx.datasource;\n    const heading_r24 = ctx.nodeHeading;\n    const content_r25 = ctx.nodeContent;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(nodeData_r23[heading_r24]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(nodeData_r23[content_r25]);\n  }\n}\n\nconst _c1 = function (a0, a1, a2) {\n  return {\n    datasource: a0,\n    nodeHeading: a1,\n    nodeContent: a2\n  };\n};\n\nconst _c2 = function (a0, a1) {\n  return {\n    \"transform\": a0,\n    \"cursor\": a1\n  };\n};\n\nclass NodeSelectService {\n  constructor() {\n    this.subject = new Subject();\n  }\n\n  sendSelect(id) {\n    this.subject.next({\n      id\n    });\n  }\n\n  clearSelect() {\n    this.subject.next();\n  }\n\n  getSelect() {\n    return this.subject.asObservable();\n  }\n\n}\n/** @nocollapse */\n\n\nNodeSelectService.ɵfac = function NodeSelectService_Factory(t) {\n  return new (t || NodeSelectService)();\n};\n/** @nocollapse */\n\n\nNodeSelectService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NodeSelectService,\n  factory: NodeSelectService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NodeSelectService, [{\n    type: Injectable\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass Node {}\n\nclass ChartNodeComponent {\n  constructor(nodeSelectService) {\n    this.nodeSelectService = nodeSelectService;\n    this.nodeClick = new EventEmitter();\n    this.Arr = Array; // Array type captured in a variable\n\n    this.isCollapsed = false; // subscribe to node selection status\n\n    this.subscription = this.nodeSelectService.getSelect().subscribe(selection => {\n      if (selection && selection.id) {\n        this.isSelected = this.datasource.id === selection.id;\n      } else {\n        // clear selection when empty selection received\n        this.isSelected = false;\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    // unsubscribe to ensure no memory leaks\n    this.subscription.unsubscribe();\n  }\n\n  ngOnInit() {}\n\n  toggleChildren() {\n    this.isCollapsed = !this.isCollapsed;\n  }\n\n  toggleAnimStart(event) {\n    if (this.isCollapsed) {\n      // 如果折叠的是根结点的子节点，那么根结点向下的连接线需要隐藏\n      if (event.element.parentElement && event.element.parentElement.parentElement && event.element.parentElement.parentElement.classList.contains('orgchart')) {\n        event.element.previousElementSibling.classList.add('oc-is-collapsed');\n      }\n    } else {\n      // 刚一展开的时候，需要马上把子节点们显示出来，以便看到“下滑”效果\n      this.ecStyles = {\n        display: 'flex'\n      };\n    }\n  }\n\n  toggleAnimEnd(event) {\n    if (this.isCollapsed) {\n      // 折叠时，“上滑”动画结束后，需要将子节点们隐藏，以便其不占用空间\n      this.ecStyles = {\n        display: 'none'\n      };\n    } else {\n      // 如果展开的是根结点的子节点，那么根结点向下的连接线需要显示\n      if (event.element.parentElement && event.element.parentElement.parentElement && event.element.parentElement.parentElement.classList.contains('orgchart')) {\n        event.element.previousElementSibling.classList.remove('oc-is-collapsed');\n      }\n    }\n  }\n\n  onClickNode(e) {\n    this.nodeClick.emit(this.datasource);\n\n    if (this.select === 'single') {\n      this.nodeSelectService.sendSelect(this.datasource.id);\n    } else if (this.select === 'multiple') {\n      this.isSelected = !this.isSelected;\n    }\n  }\n\n  onNodeClick(e) {\n    this.nodeClick.emit(e);\n  }\n\n}\n/** @nocollapse */\n\n\nChartNodeComponent.ɵfac = function ChartNodeComponent_Factory(t) {\n  return new (t || ChartNodeComponent)(i0.ɵɵdirectiveInject(NodeSelectService));\n};\n/** @nocollapse */\n\n\nChartNodeComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ChartNodeComponent,\n  selectors: [[\"orgchart-node\"]],\n  inputs: {\n    datasource: \"datasource\",\n    nodeHeading: \"nodeHeading\",\n    nodeContent: \"nodeContent\",\n    nodeTemplate: \"nodeTemplate\",\n    groupScale: \"groupScale\",\n    select: \"select\"\n  },\n  outputs: {\n    nodeClick: \"nodeClick\"\n  },\n  decls: 6,\n  vars: 11,\n  consts: [[1, \"oc-node\", 3, \"id\", \"click\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"class\", \"oc-toggle-btn oc-icon\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [\"class\", \"oc-groups\", 3, \"ngStyle\", 4, \"ngIf\"], [\"defaultNodeTemplate\", \"\"], [1, \"oc-toggle-btn\", \"oc-icon\", 3, \"ngClass\", \"click\"], [1, \"oc-groups\", 3, \"ngStyle\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"oc-group\", 4, \"ngIf\"], [1, \"oc-group\"], [3, \"datasource\", \"nodeHeading\", \"nodeContent\", \"nodeTemplate\", \"groupScale\", \"select\", \"nodeClick\", 4, \"ngIf\"], [3, \"datasource\", \"nodeHeading\", \"nodeContent\", \"nodeTemplate\", \"groupScale\", \"select\", \"nodeClick\"], [1, \"oc-node-heading\"], [1, \"oc-node-content\"]],\n  template: function ChartNodeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"click\", function ChartNodeComponent_Template_div_click_0_listener($event) {\n        return ctx.onClickNode($event);\n      });\n      i0.ɵɵtemplate(1, ChartNodeComponent_ng_container_1_Template, 1, 0, \"ng-container\", 1);\n      i0.ɵɵtemplate(2, ChartNodeComponent_i_2_Template, 1, 4, \"i\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, ChartNodeComponent_div_3_Template, 2, 3, \"div\", 3);\n      i0.ɵɵtemplate(4, ChartNodeComponent_ng_template_4_Template, 4, 2, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(5);\n\n      i0.ɵɵclassProp(\"oc-is-selected\", ctx.isSelected);\n      i0.ɵɵproperty(\"id\", ctx.datasource.id);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngTemplateOutlet\", ctx.nodeTemplate ? ctx.nodeTemplate : _r3)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction3(7, _c1, ctx.datasource, ctx.nodeHeading, ctx.nodeContent));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.datasource.children);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.datasource.children);\n    }\n  },\n  directives: [i2.NgTemplateOutlet, i2.NgIf, i2.NgClass, i2.NgStyle, i2.NgForOf, ChartNodeComponent],\n  styles: [\".oc-groups[_ngcontent-%COMP%]{display:flex;flex-direction:row}.orgchart > [_nghost-%COMP%]{align-items:center}.orgchart > [_nghost-%COMP%] > .oc-node[_ngcontent-%COMP%]:after{content:\\\"\\\";box-sizing:border-box;bottom:-10px;left:50%;height:10px;width:2px;position:absolute;background-color:#d9534fcc}.orgchart > [_nghost-%COMP%] > .oc-node.oc-is-collapsed[_ngcontent-%COMP%]:after{display:none}.orgchart > [_nghost-%COMP%] > .oc-groups[_ngcontent-%COMP%] > .oc-group[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:before{height:35px;top:-10px}.oc-node[_ngcontent-%COMP%]{width:140px;font-family:Arial;box-sizing:border-box;position:relative;padding:3px;margin:0;border:2px solid transparent;text-align:center}.oc-node[_ngcontent-%COMP%]:hover, .oc-node.oc-is-selected[_ngcontent-%COMP%]{background-color:#eed93680}.oc-node[_ngcontent-%COMP%]   .oc-node-heading[_ngcontent-%COMP%]{box-sizing:border-box;padding:2px;margin:0;width:130px;height:20px;text-align:center;font-size:.75rem;font-weight:bold;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:#d9534fcc;color:#fff;border-radius:4px 4px 0 0}.oc-node[_ngcontent-%COMP%]   .oc-node-content[_ngcontent-%COMP%]{box-sizing:border-box;padding:2px;width:130px;height:20px;font-size:.625rem;border:1px solid rgba(217,83,79,.8);border-radius:0 0 4px 4px;text-align:center;background-color:#fff;color:#333;text-overflow:ellipsis;white-space:nowrap}.oc-node[_ngcontent-%COMP%]   .oc-toggle-btn[_ngcontent-%COMP%]{color:#fff;background-color:#449d4499;position:absolute;left:5px;bottom:5px}.oc-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:20px;position:relative;padding-top:20px}.orgchart > [_nghost-%COMP%] > .oc-groups[_ngcontent-%COMP%] > .oc-group[_ngcontent-%COMP%]:first-child{padding-left:10px}.oc-group[_ngcontent-%COMP%]:not(:last-child):before{content:\\\"\\\";box-sizing:border-box;top:10px;left:12px;width:calc(100% - 2px);position:absolute;border-color:#d9534fcc;border-style:solid;border-width:0 0 2px 0}.orgchart > [_nghost-%COMP%] > .oc-groups[_ngcontent-%COMP%] > .oc-group[_ngcontent-%COMP%]:first-child:before{width:calc(100% + 8px);left:2px}[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column}[_nghost-%COMP%]:not(:last-child){padding-bottom:10px}.oc-group > [_nghost-%COMP%]:before{content:\\\"\\\";box-sizing:border-box;height:35px;width:10px;position:absolute;left:-10px;top:-10px;border-color:#d9534fcc;border-style:solid;border-width:0 0 2px 2px}.oc-group:first-child > [_nghost-%COMP%]:first-child:before{height:45px;top:-20px}[_nghost-%COMP%]:not(:last-child):after{content:\\\"\\\";box-sizing:border-box;height:calc(100% - 35px);width:10px;position:absolute;left:-10px;top:25px;border-color:#d9534fcc;border-style:solid;border-width:0 0 0 2px}.oc-icon[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;line-height:1rem;text-align:center}.oc-icon-minus[_ngcontent-%COMP%]:before{content:\\\"\\\\2212\\\"}.oc-icon-plus[_ngcontent-%COMP%]:before{content:\\\"+\\\"}\"],\n  data: {\n    animation: [trigger('expandCollapse', [state('expanded', style({\n      transform: 'translateY(0)',\n      opacity: 1\n    })), state('collapsed', style({\n      transform: 'translateY(-50px)',\n      opacity: 0\n    })), transition('expanded => collapsed', [animate('0.2s')]), transition('collapsed => expanded', [animate('0.2s')])])]\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChartNodeComponent, [{\n    type: Component,\n    args: [{\n      selector: 'orgchart-node',\n      templateUrl: './chart-node.component.html',\n      styleUrls: ['./chart-node.component.css'],\n      animations: [trigger('expandCollapse', [state('expanded', style({\n        transform: 'translateY(0)',\n        opacity: 1\n      })), state('collapsed', style({\n        transform: 'translateY(-50px)',\n        opacity: 0\n      })), transition('expanded => collapsed', [animate('0.2s')]), transition('collapsed => expanded', [animate('0.2s')])])]\n    }]\n  }], function () {\n    return [{\n      type: NodeSelectService\n    }];\n  }, {\n    datasource: [{\n      type: Input\n    }],\n    nodeHeading: [{\n      type: Input\n    }],\n    nodeContent: [{\n      type: Input\n    }],\n    nodeTemplate: [{\n      type: Input\n    }],\n    groupScale: [{\n      type: Input\n    }],\n    select: [{\n      type: Input\n    }],\n    nodeClick: [{\n      type: Output\n    }]\n  });\n})();\n\nclass ChartContainerComponent {\n  constructor(nodeSelectService) {\n    this.nodeSelectService = nodeSelectService;\n    this.nodeHeading = 'name';\n    this.nodeContent = 'title';\n    this.groupScale = 3;\n    this.pan = false;\n    this.zoom = false;\n    this.zoomoutLimit = 0.5;\n    this.zoominLimit = 7;\n    this.containerClass = '';\n    this.chartClass = '';\n    this.select = 'single';\n    this.nodeClick = new EventEmitter();\n    this.chartClick = new EventEmitter();\n    this.cursorVal = 'default';\n    this.panning = false;\n    this.startX = 0;\n    this.startY = 0;\n    this.transformVal = '';\n  }\n\n  ngOnInit() {}\n\n  panEndHandler() {\n    this.panning = false;\n    this.cursorVal = 'default';\n  }\n\n  panHandler(e) {\n    let newX = 0;\n    let newY = 0;\n\n    if (!e.targetTouches) {\n      // pand on desktop\n      newX = e.pageX - this.startX;\n      newY = e.pageY - this.startY;\n    } else if (e.targetTouches.length === 1) {\n      // pan on mobile device\n      newX = e.targetTouches[0].pageX - this.startX;\n      newY = e.targetTouches[0].pageY - this.startY;\n    } else if (e.targetTouches.length > 1) {\n      return;\n    }\n\n    if (this.transformVal === '') {\n      if (this.transformVal.indexOf('3d') === -1) {\n        this.transformVal = 'matrix(1,0,0,1,' + newX + ',' + newY + ')';\n      } else {\n        this.transformVal = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,' + newX + ', ' + newY + ',0,1)';\n      }\n    } else {\n      const matrix = this.transformVal.split(',');\n\n      if (this.transformVal.indexOf('3d') === -1) {\n        matrix[4] = newX.toString();\n        matrix[5] = newY + ')';\n      } else {\n        matrix[12] = newX.toString();\n        matrix[13] = newY.toString();\n      }\n\n      this.transformVal = matrix.join(',');\n    }\n  }\n\n  panStartHandler(e) {\n    if (e.target.querySelectorAll('.node') && e.target.querySelectorAll('.node').length) {\n      this.panning = false;\n      return;\n    } else {\n      this.cursorVal = 'move';\n      this.panning = true;\n    }\n\n    let lastX = 0;\n    let lastY = 0;\n\n    if (this.transformVal !== '') {\n      const matrix = this.transformVal.split(',');\n\n      if (this.transformVal.indexOf('3d') === -1) {\n        lastX = parseInt(matrix[4], 10);\n        lastY = parseInt(matrix[5], 10);\n      } else {\n        lastX = parseInt(matrix[12], 10);\n        lastY = parseInt(matrix[13], 10);\n      }\n    }\n\n    if (!e.targetTouches) {\n      // pand on desktop\n      this.startX = e.pageX - lastX;\n      this.startY = e.pageY - lastY;\n    } else if (e.targetTouches.length === 1) {\n      // pan on mobile device\n      this.startX = e.targetTouches[0].pageX - lastX;\n      this.startY = e.targetTouches[0].pageY - lastY;\n    } else if (e.targetTouches.length > 1) {\n      return;\n    }\n  }\n\n  setChartScale(newScale) {\n    let matrix = [];\n    let targetScale = 1;\n\n    if (this.transformVal === '') {\n      this.transformVal = 'matrix(' + newScale + ', 0, 0, ' + newScale + ', 0, 0)';\n    } else {\n      matrix = this.transformVal.split(',');\n\n      if (this.transformVal.indexOf('3d') === -1) {\n        targetScale = Math.abs(parseFloat(matrix[3]) * newScale);\n\n        if (targetScale > this.zoomoutLimit && targetScale < this.zoominLimit) {\n          matrix[0] = 'matrix(' + targetScale;\n          matrix[3] = targetScale;\n          this.transformVal = matrix.join(',');\n        }\n      } else {\n        targetScale = Math.abs(parseFloat(matrix[5]) * newScale);\n\n        if (targetScale > this.zoomoutLimit && targetScale < this.zoominLimit) {\n          matrix[0] = 'matrix3d(' + targetScale;\n          matrix[5] = targetScale;\n          this.transformVal = matrix.join(',');\n        }\n      }\n    }\n  }\n\n  zoomHandler(e) {\n    const newScale = 1 + (e.deltaY > 0 ? -0.2 : 0.2);\n    this.setChartScale(newScale);\n  }\n\n  onClickChart(e) {\n    if (!e.target.closest('.oc-node')) {\n      this.chartClick.emit();\n      this.nodeSelectService.clearSelect();\n    }\n  }\n\n  onNodeClick(nodeData) {\n    this.nodeClick.emit(nodeData);\n  }\n\n}\n/** @nocollapse */\n\n\nChartContainerComponent.ɵfac = function ChartContainerComponent_Factory(t) {\n  return new (t || ChartContainerComponent)(i0.ɵɵdirectiveInject(NodeSelectService));\n};\n/** @nocollapse */\n\n\nChartContainerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ChartContainerComponent,\n  selectors: [[\"organization-chart\"]],\n  inputs: {\n    datasource: \"datasource\",\n    nodeHeading: \"nodeHeading\",\n    nodeContent: \"nodeContent\",\n    nodeTemplate: \"nodeTemplate\",\n    groupScale: \"groupScale\",\n    pan: \"pan\",\n    zoom: \"zoom\",\n    zoomoutLimit: \"zoomoutLimit\",\n    zoominLimit: \"zoominLimit\",\n    containerClass: \"containerClass\",\n    chartClass: \"chartClass\",\n    select: \"select\"\n  },\n  outputs: {\n    nodeClick: \"nodeClick\",\n    chartClick: \"chartClick\"\n  },\n  decls: 3,\n  vars: 12,\n  consts: [[1, \"orgchart-container\", 3, \"ngClass\", \"wheel\", \"mouseup\"], [1, \"orgchart\", 3, \"ngClass\", \"ngStyle\", \"mousedown\", \"mousemove\", \"click\"], [3, \"datasource\", \"nodeHeading\", \"nodeContent\", \"nodeTemplate\", \"groupScale\", \"select\", \"nodeClick\"]],\n  template: function ChartContainerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"wheel\", function ChartContainerComponent_Template_div_wheel_0_listener($event) {\n        return ctx.zoom ? ctx.zoomHandler($event) : true;\n      })(\"mouseup\", function ChartContainerComponent_Template_div_mouseup_0_listener() {\n        return ctx.pan && ctx.panning ? ctx.panEndHandler() : true;\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵlistener(\"mousedown\", function ChartContainerComponent_Template_div_mousedown_1_listener($event) {\n        return ctx.pan ? ctx.panStartHandler($event) : true;\n      })(\"mousemove\", function ChartContainerComponent_Template_div_mousemove_1_listener($event) {\n        return ctx.pan && ctx.panning ? ctx.panHandler($event) : true;\n      })(\"click\", function ChartContainerComponent_Template_div_click_1_listener($event) {\n        return ctx.onClickChart($event);\n      });\n      i0.ɵɵelementStart(2, \"orgchart-node\", 2);\n      i0.ɵɵlistener(\"nodeClick\", function ChartContainerComponent_Template_orgchart_node_nodeClick_2_listener($event) {\n        return ctx.onNodeClick($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngClass\", ctx.containerClass);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", ctx.chartClass)(\"ngStyle\", i0.ɵɵpureFunction2(9, _c2, ctx.transformVal, ctx.cursorVal));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"datasource\", ctx.datasource)(\"nodeHeading\", ctx.nodeHeading)(\"nodeContent\", ctx.nodeContent)(\"nodeTemplate\", ctx.nodeTemplate)(\"groupScale\", ctx.groupScale)(\"select\", ctx.select);\n    }\n  },\n  directives: [i2.NgClass, i2.NgStyle, ChartNodeComponent],\n  styles: [\".orgchart-container[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;margin:10px;height:700px;border:2px dashed #aaa;border-radius:5px;overflow:auto;text-align:center}.orgchart[_ngcontent-%COMP%]{box-sizing:border-box;display:inline-block;background-image:linear-gradient(90deg,rgba(200,0,0,.15) 10%,rgba(0,0,0,0) 10%),linear-gradient(rgba(200,0,0,.15) 10%,rgba(0,0,0,0) 10%);background-size:10px 10px;border:1px dashed rgba(0,0,0,0);padding:20px}\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChartContainerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'organization-chart',\n      templateUrl: './chart-container.component.html',\n      styleUrls: ['./chart-container.component.css']\n    }]\n  }], function () {\n    return [{\n      type: NodeSelectService\n    }];\n  }, {\n    datasource: [{\n      type: Input\n    }],\n    nodeHeading: [{\n      type: Input\n    }],\n    nodeContent: [{\n      type: Input\n    }],\n    nodeTemplate: [{\n      type: Input\n    }],\n    groupScale: [{\n      type: Input\n    }],\n    pan: [{\n      type: Input\n    }],\n    zoom: [{\n      type: Input\n    }],\n    zoomoutLimit: [{\n      type: Input\n    }],\n    zoominLimit: [{\n      type: Input\n    }],\n    containerClass: [{\n      type: Input\n    }],\n    chartClass: [{\n      type: Input\n    }],\n    select: [{\n      type: Input\n    }],\n    nodeClick: [{\n      type: Output\n    }],\n    chartClick: [{\n      type: Output\n    }]\n  });\n})();\n\nclass OrgchartModule {}\n/** @nocollapse */\n\n\nOrgchartModule.ɵfac = function OrgchartModule_Factory(t) {\n  return new (t || OrgchartModule)();\n};\n/** @nocollapse */\n\n\nOrgchartModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: OrgchartModule,\n  declarations: [ChartContainerComponent, ChartNodeComponent],\n  imports: [CommonModule],\n  exports: [ChartContainerComponent, ChartNodeComponent]\n});\n/** @nocollapse */\n\nOrgchartModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [NodeSelectService],\n  imports: [[CommonModule // BrowserAnimationsModule\n  ]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OrgchartModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [ChartContainerComponent, ChartNodeComponent],\n      imports: [CommonModule // BrowserAnimationsModule\n      ],\n      exports: [ChartContainerComponent, ChartNodeComponent],\n      providers: [NodeSelectService]\n    }]\n  }], null, null);\n})();\n/*\r\n * Public API Surface of ng-orgchart\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { ChartContainerComponent, ChartNodeComponent, OrgchartModule };","map":{"version":3,"sources":["D:/Development/COOFIS UI/dabeng-orgchart/ng-orgchart/dist/ng-orgchart/fesm2015/anorangga-ng-orgchart.js"],"names":["i0","Injectable","EventEmitter","Component","Input","Output","NgModule","Subject","trigger","state","style","transition","animate","i2","CommonModule","NodeSelectService","constructor","subject","sendSelect","id","next","clearSelect","getSelect","asObservable","ɵfac","ɵprov","type","Node","ChartNodeComponent","nodeSelectService","nodeClick","Arr","Array","isCollapsed","subscription","subscribe","selection","isSelected","datasource","ngOnDestroy","unsubscribe","ngOnInit","toggleChildren","toggleAnimStart","event","element","parentElement","classList","contains","previousElementSibling","add","ecStyles","display","toggleAnimEnd","remove","onClickNode","e","emit","select","onNodeClick","ɵcmp","NgTemplateOutlet","NgIf","NgClass","NgStyle","NgForOf","transform","opacity","args","selector","templateUrl","styleUrls","animations","nodeHeading","nodeContent","nodeTemplate","groupScale","ChartContainerComponent","pan","zoom","zoomoutLimit","zoominLimit","containerClass","chartClass","chartClick","cursorVal","panning","startX","startY","transformVal","panEndHandler","panHandler","newX","newY","targetTouches","pageX","pageY","length","indexOf","matrix","split","toString","join","panStartHandler","target","querySelectorAll","lastX","lastY","parseInt","setChartScale","newScale","targetScale","Math","abs","parseFloat","zoomHandler","deltaY","onClickChart","closest","nodeData","OrgchartModule","ɵmod","ɵinj","declarations","imports","exports","providers"],"mappings":"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","sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\n\nclass NodeSelectService {\r\n    constructor() {\r\n        this.subject = new Subject();\r\n    }\r\n    sendSelect(id) {\r\n        this.subject.next({ id });\r\n    }\r\n    clearSelect() {\r\n        this.subject.next();\r\n    }\r\n    getSelect() {\r\n        return this.subject.asObservable();\r\n    }\r\n}\r\n/** @nocollapse */ NodeSelectService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: NodeSelectService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\r\n/** @nocollapse */ NodeSelectService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: NodeSelectService });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: NodeSelectService, decorators: [{\r\n            type: Injectable\r\n        }], ctorParameters: function () { return []; } });\n\nclass Node {\r\n}\n\nclass ChartNodeComponent {\r\n    constructor(nodeSelectService) {\r\n        this.nodeSelectService = nodeSelectService;\r\n        this.nodeClick = new EventEmitter();\r\n        this.Arr = Array; // Array type captured in a variable\r\n        this.isCollapsed = false;\r\n        // subscribe to node selection status\r\n        this.subscription = this.nodeSelectService.getSelect().subscribe(selection => {\r\n            if (selection && selection.id) {\r\n                this.isSelected = this.datasource.id === selection.id;\r\n            }\r\n            else { // clear selection when empty selection received\r\n                this.isSelected = false;\r\n            }\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        // unsubscribe to ensure no memory leaks\r\n        this.subscription.unsubscribe();\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    toggleChildren() {\r\n        this.isCollapsed = !this.isCollapsed;\r\n    }\r\n    toggleAnimStart(event) {\r\n        if (this.isCollapsed) {\r\n            // 如果折叠的是根结点的子节点，那么根结点向下的连接线需要隐藏\r\n            if (event.element.parentElement &&\r\n                event.element.parentElement.parentElement &&\r\n                event.element.parentElement.parentElement.classList.contains('orgchart')) {\r\n                event.element.previousElementSibling.classList.add('oc-is-collapsed');\r\n            }\r\n        }\r\n        else { // 刚一展开的时候，需要马上把子节点们显示出来，以便看到“下滑”效果\r\n            this.ecStyles = {\r\n                display: 'flex'\r\n            };\r\n        }\r\n    }\r\n    toggleAnimEnd(event) {\r\n        if (this.isCollapsed) { // 折叠时，“上滑”动画结束后，需要将子节点们隐藏，以便其不占用空间\r\n            this.ecStyles = {\r\n                display: 'none'\r\n            };\r\n        }\r\n        else {\r\n            // 如果展开的是根结点的子节点，那么根结点向下的连接线需要显示\r\n            if (event.element.parentElement &&\r\n                event.element.parentElement.parentElement &&\r\n                event.element.parentElement.parentElement.classList.contains('orgchart')) {\r\n                event.element.previousElementSibling.classList.remove('oc-is-collapsed');\r\n            }\r\n        }\r\n    }\r\n    onClickNode(e) {\r\n        this.nodeClick.emit(this.datasource);\r\n        if (this.select === 'single') {\r\n            this.nodeSelectService.sendSelect(this.datasource.id);\r\n        }\r\n        else if (this.select === 'multiple') {\r\n            this.isSelected = !this.isSelected;\r\n        }\r\n    }\r\n    onNodeClick(e) {\r\n        this.nodeClick.emit(e);\r\n    }\r\n}\r\n/** @nocollapse */ ChartNodeComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: ChartNodeComponent, deps: [{ token: NodeSelectService }], target: i0.ɵɵFactoryTarget.Component });\r\n/** @nocollapse */ ChartNodeComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.17\", type: ChartNodeComponent, selector: \"orgchart-node\", inputs: { datasource: \"datasource\", nodeHeading: \"nodeHeading\", nodeContent: \"nodeContent\", nodeTemplate: \"nodeTemplate\", groupScale: \"groupScale\", select: \"select\" }, outputs: { nodeClick: \"nodeClick\" }, ngImport: i0, template: \"<div class=\\\"oc-node\\\" [id]=\\\"datasource.id\\\" [class.oc-is-selected]=\\\"isSelected\\\" (click)=\\\"onClickNode($event)\\\">\\r\\n\\t<ng-container\\r\\n\\t\\t*ngTemplateOutlet=\\\"nodeTemplate ? nodeTemplate : defaultNodeTemplate; context:{ datasource:datasource,nodeHeading: nodeHeading, nodeContent: nodeContent }\\\">\\r\\n\\t</ng-container>\\r\\n\\t<i *ngIf=\\\"datasource.children\\\" [ngClass]=\\\"{'oc-icon-plus': isCollapsed, 'oc-icon-minus': !isCollapsed}\\\" (click)=\\\"toggleChildren()\\\" class=\\\"oc-toggle-btn oc-icon\\\"></i>\\r\\n</div>\\r\\n<div *ngIf=\\\"datasource.children\\\" [@expandCollapse]=\\\"isCollapsed ? 'collapsed' : 'expanded'\\\"\\r\\n\\t(@expandCollapse.start)=\\\"toggleAnimStart($event)\\\" (@expandCollapse.done)=\\\"toggleAnimEnd($event)\\\"\\r\\n\\t[ngStyle]=\\\"ecStyles\\\" class=\\\"oc-groups\\\">\\r\\n\\t<ng-container *ngFor=\\\"let node of datasource.children;let i=index\\\">\\r\\n\\t\\t<div *ngIf=\\\"i % groupScale === 0\\\" class=\\\"oc-group\\\">\\r\\n\\t\\t\\t<ng-container *ngFor=\\\"let temp of Arr(groupScale);let j=index;\\\">\\r\\n\\t\\t\\t\\t<orgchart-node *ngIf=\\\"i + j < datasource.children.length\\\" [datasource]=\\\"datasource.children[i + j]\\\"\\r\\n\\t\\t\\t\\t\\t[nodeHeading]=\\\"nodeHeading\\\" [nodeContent]=\\\"nodeContent\\\" [nodeTemplate]=\\\"nodeTemplate\\\"\\r\\n\\t\\t\\t\\t\\t[groupScale]=\\\"groupScale\\\" [select]=\\\"select\\\" (nodeClick)=\\\"onNodeClick($event)\\\">\\r\\n\\t\\t\\t\\t</orgchart-node>\\r\\n\\t\\t\\t</ng-container>\\r\\n\\t\\t</div>\\r\\n\\t</ng-container>\\r\\n</div>\\r\\n\\r\\n<ng-template #defaultNodeTemplate let-nodeData=\\\"datasource\\\" let-heading=\\\"nodeHeading\\\" let-content=\\\"nodeContent\\\">\\r\\n\\t<div class=\\\"oc-node-heading\\\">{{nodeData[heading]}}</div>\\r\\n\\t<div class=\\\"oc-node-content\\\">{{nodeData[content]}}</div>\\r\\n</ng-template>\", styles: [\".oc-groups{display:flex;flex-direction:row}.orgchart>:host{align-items:center}.orgchart>:host>.oc-node:after{content:\\\"\\\";box-sizing:border-box;bottom:-10px;left:50%;height:10px;width:2px;position:absolute;background-color:#d9534fcc}.orgchart>:host>.oc-node.oc-is-collapsed:after{display:none}.orgchart>:host>.oc-groups>.oc-group>:host:before{height:35px;top:-10px}.oc-node{width:140px;font-family:Arial;box-sizing:border-box;position:relative;padding:3px;margin:0;border:2px solid transparent;text-align:center}.oc-node:hover,.oc-node.oc-is-selected{background-color:#eed93680}.oc-node .oc-node-heading{box-sizing:border-box;padding:2px;margin:0;width:130px;height:20px;text-align:center;font-size:.75rem;font-weight:bold;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:#d9534fcc;color:#fff;border-radius:4px 4px 0 0}.oc-node .oc-node-content{box-sizing:border-box;padding:2px;width:130px;height:20px;font-size:.625rem;border:1px solid rgba(217,83,79,.8);border-radius:0 0 4px 4px;text-align:center;background-color:#fff;color:#333;text-overflow:ellipsis;white-space:nowrap}.oc-node .oc-toggle-btn{color:#fff;background-color:#449d4499;position:absolute;left:5px;bottom:5px}.oc-group{display:flex;flex-direction:column;padding-left:20px;position:relative;padding-top:20px}.orgchart>:host>.oc-groups>.oc-group:first-child{padding-left:10px}.oc-group:not(:last-child):before{content:\\\"\\\";box-sizing:border-box;top:10px;left:12px;width:calc(100% - 2px);position:absolute;border-color:#d9534fcc;border-style:solid;border-width:0 0 2px 0}.orgchart>:host>.oc-groups>.oc-group:first-child:before{width:calc(100% + 8px);left:2px}:host{position:relative;display:flex;flex-direction:column}:host:not(:last-child){padding-bottom:10px}.oc-group>:host:before{content:\\\"\\\";box-sizing:border-box;height:35px;width:10px;position:absolute;left:-10px;top:-10px;border-color:#d9534fcc;border-style:solid;border-width:0 0 2px 2px}.oc-group:first-child>:host:first-child:before{height:45px;top:-20px}:host:not(:last-child):after{content:\\\"\\\";box-sizing:border-box;height:calc(100% - 35px);width:10px;position:absolute;left:-10px;top:25px;border-color:#d9534fcc;border-style:solid;border-width:0 0 0 2px}.oc-icon{display:inline-block;width:1rem;height:1rem;line-height:1rem;text-align:center}.oc-icon-minus:before{content:\\\"\\\\2212\\\"}.oc-icon-plus:before{content:\\\"+\\\"}\\n\"], components: [{ type: ChartNodeComponent, selector: \"orgchart-node\", inputs: [\"datasource\", \"nodeHeading\", \"nodeContent\", \"nodeTemplate\", \"groupScale\", \"select\"], outputs: [\"nodeClick\"] }], directives: [{ type: i2.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }, { type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i2.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i2.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], animations: [\r\n        trigger('expandCollapse', [\r\n            state('expanded', style({\r\n                transform: 'translateY(0)',\r\n                opacity: 1\r\n            })),\r\n            state('collapsed', style({\r\n                transform: 'translateY(-50px)',\r\n                opacity: 0\r\n            })),\r\n            transition('expanded => collapsed', [animate('0.2s')]),\r\n            transition('collapsed => expanded', [animate('0.2s')])\r\n        ])\r\n    ] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: ChartNodeComponent, decorators: [{\r\n            type: Component,\r\n            args: [{\r\n                    selector: 'orgchart-node',\r\n                    templateUrl: './chart-node.component.html',\r\n                    styleUrls: ['./chart-node.component.css'],\r\n                    animations: [\r\n                        trigger('expandCollapse', [\r\n                            state('expanded', style({\r\n                                transform: 'translateY(0)',\r\n                                opacity: 1\r\n                            })),\r\n                            state('collapsed', style({\r\n                                transform: 'translateY(-50px)',\r\n                                opacity: 0\r\n                            })),\r\n                            transition('expanded => collapsed', [animate('0.2s')]),\r\n                            transition('collapsed => expanded', [animate('0.2s')])\r\n                        ])\r\n                    ]\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: NodeSelectService }]; }, propDecorators: { datasource: [{\r\n                type: Input\r\n            }], nodeHeading: [{\r\n                type: Input\r\n            }], nodeContent: [{\r\n                type: Input\r\n            }], nodeTemplate: [{\r\n                type: Input\r\n            }], groupScale: [{\r\n                type: Input\r\n            }], select: [{\r\n                type: Input\r\n            }], nodeClick: [{\r\n                type: Output\r\n            }] } });\n\nclass ChartContainerComponent {\r\n    constructor(nodeSelectService) {\r\n        this.nodeSelectService = nodeSelectService;\r\n        this.nodeHeading = 'name';\r\n        this.nodeContent = 'title';\r\n        this.groupScale = 3;\r\n        this.pan = false;\r\n        this.zoom = false;\r\n        this.zoomoutLimit = 0.5;\r\n        this.zoominLimit = 7;\r\n        this.containerClass = '';\r\n        this.chartClass = '';\r\n        this.select = 'single';\r\n        this.nodeClick = new EventEmitter();\r\n        this.chartClick = new EventEmitter();\r\n        this.cursorVal = 'default';\r\n        this.panning = false;\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.transformVal = '';\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    panEndHandler() {\r\n        this.panning = false;\r\n        this.cursorVal = 'default';\r\n    }\r\n    panHandler(e) {\r\n        let newX = 0;\r\n        let newY = 0;\r\n        if (!e.targetTouches) {\r\n            // pand on desktop\r\n            newX = e.pageX - this.startX;\r\n            newY = e.pageY - this.startY;\r\n        }\r\n        else if (e.targetTouches.length === 1) {\r\n            // pan on mobile device\r\n            newX = e.targetTouches[0].pageX - this.startX;\r\n            newY = e.targetTouches[0].pageY - this.startY;\r\n        }\r\n        else if (e.targetTouches.length > 1) {\r\n            return;\r\n        }\r\n        if (this.transformVal === '') {\r\n            if (this.transformVal.indexOf('3d') === -1) {\r\n                this.transformVal = 'matrix(1,0,0,1,' + newX + ',' + newY + ')';\r\n            }\r\n            else {\r\n                this.transformVal =\r\n                    'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,' + newX + ', ' + newY + ',0,1)';\r\n            }\r\n        }\r\n        else {\r\n            const matrix = this.transformVal.split(',');\r\n            if (this.transformVal.indexOf('3d') === -1) {\r\n                matrix[4] = newX.toString();\r\n                matrix[5] = newY + ')';\r\n            }\r\n            else {\r\n                matrix[12] = newX.toString();\r\n                matrix[13] = newY.toString();\r\n            }\r\n            this.transformVal = matrix.join(',');\r\n        }\r\n    }\r\n    panStartHandler(e) {\r\n        if (e.target.querySelectorAll('.node') && e.target.querySelectorAll('.node').length) {\r\n            this.panning = false;\r\n            return;\r\n        }\r\n        else {\r\n            this.cursorVal = 'move';\r\n            this.panning = true;\r\n        }\r\n        let lastX = 0;\r\n        let lastY = 0;\r\n        if (this.transformVal !== '') {\r\n            const matrix = this.transformVal.split(',');\r\n            if (this.transformVal.indexOf('3d') === -1) {\r\n                lastX = parseInt(matrix[4], 10);\r\n                lastY = parseInt(matrix[5], 10);\r\n            }\r\n            else {\r\n                lastX = parseInt(matrix[12], 10);\r\n                lastY = parseInt(matrix[13], 10);\r\n            }\r\n        }\r\n        if (!e.targetTouches) {\r\n            // pand on desktop\r\n            this.startX = e.pageX - lastX;\r\n            this.startY = e.pageY - lastY;\r\n        }\r\n        else if (e.targetTouches.length === 1) {\r\n            // pan on mobile device\r\n            this.startX = e.targetTouches[0].pageX - lastX;\r\n            this.startY = e.targetTouches[0].pageY - lastY;\r\n        }\r\n        else if (e.targetTouches.length > 1) {\r\n            return;\r\n        }\r\n    }\r\n    setChartScale(newScale) {\r\n        let matrix = [];\r\n        let targetScale = 1;\r\n        if (this.transformVal === '') {\r\n            this.transformVal =\r\n                'matrix(' + newScale + ', 0, 0, ' + newScale + ', 0, 0)';\r\n        }\r\n        else {\r\n            matrix = this.transformVal.split(',');\r\n            if (this.transformVal.indexOf('3d') === -1) {\r\n                targetScale = Math.abs(parseFloat(matrix[3]) * newScale);\r\n                if (targetScale > this.zoomoutLimit && targetScale < this.zoominLimit) {\r\n                    matrix[0] = 'matrix(' + targetScale;\r\n                    matrix[3] = targetScale;\r\n                    this.transformVal = matrix.join(',');\r\n                }\r\n            }\r\n            else {\r\n                targetScale = Math.abs(parseFloat(matrix[5]) * newScale);\r\n                if (targetScale > this.zoomoutLimit && targetScale < this.zoominLimit) {\r\n                    matrix[0] = 'matrix3d(' + targetScale;\r\n                    matrix[5] = targetScale;\r\n                    this.transformVal = matrix.join(',');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    zoomHandler(e) {\r\n        const newScale = 1 + (e.deltaY > 0 ? -0.2 : 0.2);\r\n        this.setChartScale(newScale);\r\n    }\r\n    onClickChart(e) {\r\n        if (!e.target.closest('.oc-node')) {\r\n            this.chartClick.emit();\r\n            this.nodeSelectService.clearSelect();\r\n        }\r\n    }\r\n    onNodeClick(nodeData) {\r\n        this.nodeClick.emit(nodeData);\r\n    }\r\n}\r\n/** @nocollapse */ ChartContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: ChartContainerComponent, deps: [{ token: NodeSelectService }], target: i0.ɵɵFactoryTarget.Component });\r\n/** @nocollapse */ ChartContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.17\", type: ChartContainerComponent, selector: \"organization-chart\", inputs: { datasource: \"datasource\", nodeHeading: \"nodeHeading\", nodeContent: \"nodeContent\", nodeTemplate: \"nodeTemplate\", groupScale: \"groupScale\", pan: \"pan\", zoom: \"zoom\", zoomoutLimit: \"zoomoutLimit\", zoominLimit: \"zoominLimit\", containerClass: \"containerClass\", chartClass: \"chartClass\", select: \"select\" }, outputs: { nodeClick: \"nodeClick\", chartClick: \"chartClick\" }, ngImport: i0, template: \"<div class=\\\"orgchart-container\\\" [ngClass]=\\\"containerClass\\\" (wheel)=\\\"zoom ? zoomHandler($event) : true\\\"\\r\\n\\t(mouseup)=\\\"pan && panning ? panEndHandler() : true\\\">\\r\\n\\t<div class=\\\"orgchart\\\" [ngClass]=\\\"chartClass\\\" [ngStyle]=\\\"{'transform': transformVal, 'cursor': cursorVal}\\\"\\r\\n\\t\\t(mousedown)=\\\"pan ? panStartHandler($event) : true\\\" (mousemove)=\\\"pan && panning ? panHandler($event) : true\\\"\\r\\n\\t\\t(click)=\\\"onClickChart($event)\\\">\\r\\n\\t\\t<orgchart-node [datasource]=\\\"datasource\\\" [nodeHeading]=\\\"nodeHeading\\\" [nodeContent]=\\\"nodeContent\\\"\\r\\n\\t\\t\\t[nodeTemplate]=\\\"nodeTemplate\\\" [groupScale]=\\\"groupScale\\\" [select]=\\\"select\\\" (nodeClick)=\\\"onNodeClick($event)\\\"></orgchart-node>\\r\\n\\t</div>\\r\\n</div>\", styles: [\".orgchart-container{box-sizing:border-box;position:relative;margin:10px;height:700px;border:2px dashed #aaa;border-radius:5px;overflow:auto;text-align:center}.orgchart{box-sizing:border-box;display:inline-block;background-image:linear-gradient(90deg,rgba(200,0,0,.15) 10%,rgba(0,0,0,0) 10%),linear-gradient(rgba(200,0,0,.15) 10%,rgba(0,0,0,0) 10%);background-size:10px 10px;border:1px dashed rgba(0,0,0,0);padding:20px}\\n\"], components: [{ type: ChartNodeComponent, selector: \"orgchart-node\", inputs: [\"datasource\", \"nodeHeading\", \"nodeContent\", \"nodeTemplate\", \"groupScale\", \"select\"], outputs: [\"nodeClick\"] }], directives: [{ type: i2.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i2.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: ChartContainerComponent, decorators: [{\r\n            type: Component,\r\n            args: [{\r\n                    selector: 'organization-chart',\r\n                    templateUrl: './chart-container.component.html',\r\n                    styleUrls: ['./chart-container.component.css']\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: NodeSelectService }]; }, propDecorators: { datasource: [{\r\n                type: Input\r\n            }], nodeHeading: [{\r\n                type: Input\r\n            }], nodeContent: [{\r\n                type: Input\r\n            }], nodeTemplate: [{\r\n                type: Input\r\n            }], groupScale: [{\r\n                type: Input\r\n            }], pan: [{\r\n                type: Input\r\n            }], zoom: [{\r\n                type: Input\r\n            }], zoomoutLimit: [{\r\n                type: Input\r\n            }], zoominLimit: [{\r\n                type: Input\r\n            }], containerClass: [{\r\n                type: Input\r\n            }], chartClass: [{\r\n                type: Input\r\n            }], select: [{\r\n                type: Input\r\n            }], nodeClick: [{\r\n                type: Output\r\n            }], chartClick: [{\r\n                type: Output\r\n            }] } });\n\nclass OrgchartModule {\r\n}\r\n/** @nocollapse */ OrgchartModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: OrgchartModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\n/** @nocollapse */ OrgchartModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: OrgchartModule, declarations: [ChartContainerComponent, ChartNodeComponent], imports: [CommonModule], exports: [ChartContainerComponent, ChartNodeComponent] });\r\n/** @nocollapse */ OrgchartModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: OrgchartModule, providers: [NodeSelectService], imports: [[\r\n            CommonModule,\r\n            // BrowserAnimationsModule\r\n        ]] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.17\", ngImport: i0, type: OrgchartModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    declarations: [ChartContainerComponent, ChartNodeComponent],\r\n                    imports: [\r\n                        CommonModule,\r\n                        // BrowserAnimationsModule\r\n                    ],\r\n                    exports: [ChartContainerComponent, ChartNodeComponent],\r\n                    providers: [NodeSelectService],\r\n                }]\r\n        }] });\n\n/*\r\n * Public API Surface of ng-orgchart\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ChartContainerComponent, ChartNodeComponent, OrgchartModule };\n"]},"metadata":{},"sourceType":"module"}